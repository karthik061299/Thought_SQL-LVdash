{
  "version": "1.0",
  "displayName": "Top On Press Events",
  "description": "HPX Events Model with IIDE Table",
  "datasets": [
    {
      "name": "hpx_events_model_dataset",
      "displayName": "HPX Events Model Dataset",
      "query": "SELECT * FROM team_css_analytics_prod.hpx_analytics.hpx_events_model_iide_metric_view WHERE ui_action = 'onpress' AND event_date_time >= '2023-05-01' AND control NOT LIKE '%testid%' AND control != 'welcome core navigationviewitem id'"
    }
  ],
  "pages": [
    {
      "name": "page_1",
      "displayName": "Top On Press Events Dashboard",
      "layout": {
        "position": {
          "x": 0,
          "y": 0,
          "width": 6,
          "height": 4
        }
      },
      "spec": {
        "version": "1.0",
        "datasets": [
          {
            "name": "hpx_events_model_dataset",
            "displayName": "HPX Events Model Dataset",
            "query": "SELECT DATE_TRUNC('DAY', event_date_time) as daily_event_date, control, SUM(clicks) as total_clicks FROM team_css_analytics_prod.hpx_analytics.hpx_events_model_iide_metric_view WHERE ui_action = 'onpress' AND event_date_time >= '2023-05-01' AND control NOT LIKE '%testid%' AND control != 'welcome core navigationviewitem id' GROUP BY DATE_TRUNC('DAY', event_date_time), control ORDER BY total_clicks DESC LIMIT 10"
          }
        ],
        "fields": [
          {
            "name": "daily_event_date",
            "datasetName": "hpx_events_model_dataset",
            "displayName": "Daily Event Date",
            "type": "temporal"
          },
          {
            "name": "control",
            "datasetName": "hpx_events_model_dataset", 
            "displayName": "Control",
            "type": "categorical"
          },
          {
            "name": "total_clicks",
            "datasetName": "hpx_events_model_dataset",
            "displayName": "Total Clicks", 
            "type": "quantitative"
          }
        ],
        "encodings": {
          "x": {
            "fieldName": "daily_event_date",
            "displayName": "Daily Event Date",
            "scale": {
              "type": "temporal"
            }
          },
          "y": {
            "fieldName": "total_clicks",
            "displayName": "Total Clicks",
            "scale": {
              "type": "quantitative"
            }
          },
          "color": {
            "fieldName": "control",
            "displayName": "Control",
            "scale": {
              "type": "categorical"
            }
          }
        },
        "mark": {
          "type": "column",
          "stacked": true
        },
        "title": "Top On Press Events",
        "subtitle": "HPX Events Model with IIDE Table"
      }
    }
  ],
  "filters": [
    {
      "name": "date_filter",
      "displayName": "Event Date Filter",
      "fieldName": "event_date_time",
      "datasetName": "hpx_events_model_dataset",
      "condition": {
        "op": ">=",
        "values": ["2023-05-01"]
      }
    },
    {
      "name": "ui_action_filter",
      "displayName": "UI Action Filter", 
      "fieldName": "ui_action",
      "datasetName": "hpx_events_model_dataset",
      "condition": {
        "op": "=",
        "values": ["onpress"]
      }
    },
    {
      "name": "control_exclude_filter",
      "displayName": "Control Exclude Filter",
      "fieldName": "control",
      "datasetName": "hpx_events_model_dataset", 
      "condition": {
        "op": "not contains",
        "values": ["testid"]
      }
    },
    {
      "name": "control_exclude_welcome_filter",
      "displayName": "Control Exclude Welcome Filter",
      "fieldName": "control",
      "datasetName": "hpx_events_model_dataset",
      "condition": {
        "op": "!=",
        "values": ["welcome core navigationviewitem id"]
      }
    }
  ],
  "parameters": [],
  "metadata": {
    "sourceSystem": "ThoughtSpot",
    "migrationVersion": "1.0",
    "originalVizId": "bf836e7c-76b8-4a0e-9210-56a37e6ffc1a",
    "originalTableId": "hpx_events_model",
    "originalTableFqn": "d88e6611-f923-40db-aa86-d9013633b3cc",
    "chartType": "STACKED_COLUMN",
    "createdDate": "2024-01-01T00:00:00Z",
    "lastModified": "2024-01-01T00:00:00Z"
  }
}