{
  "version": "1.0",
  "displayName": "Top On Press Events",
  "description": "HPX Events Model with IIDE Table",
  "datasets": [
    {
      "name": "hpx_events_model_dataset",
      "displayName": "HPX Events Model Dataset",
      "query": "SELECT control AS `control`, DATE_TRUNC('DAY', event_date_time) AS `daily_event_date`, clicks AS `total_clicks` FROM team_css_analytics_prod.hpx_analytics.hpx_events_model_iide_metric_view WHERE event_date_time >= '2023-05-01' AND control IS NOT NULL AND control NOT LIKE '%testid%' AND ui_action = 'onpress' AND control != 'welcome core navigationviewitem id'"
    }
  ],
  "pages": [
    {
      "name": "page_1",
      "displayName": "Top On Press Events Dashboard",
      "layout": {
        "position": {
          "x": 0,
          "y": 0,
          "width": 6,
          "height": 4
        }
      },
      "widgets": [
        {
          "name": "top_onpress_events_chart",
          "displayName": "Top On Press Events",
          "position": {
            "x": 0,
            "y": 0,
            "width": 6,
            "height": 4
          },
          "widget": {
            "spec": {
              "version": "3.0",
              "widgetType": "column",
              "encodings": {
                "x": {
                  "fieldName": "daily_event_date",
                  "displayName": "Daily Event Date",
                  "scale": {
                    "type": "temporal"
                  }
                },
                "y": {
                  "fieldName": "total_clicks",
                  "displayName": "Total Clicks",
                  "scale": {
                    "type": "quantitative"
                  }
                },
                "color": {
                  "fieldName": "control",
                  "displayName": "Control",
                  "scale": {
                    "type": "categorical"
                  }
                }
              },
              "mark": {
                "type": "column",
                "stacked": true
              },
              "colorPalette": {
                "paletteId": "default",
                "colors": [
                  "#B094F8",
                  "#56D3A8",
                  "#06BF7F",
                  "#FCD977",
                  "#FCC838",
                  "#82DFE9",
                  "#48D1E0",
                  "#71A1F4",
                  "#2E75F0",
                  "#BCBCBC"
                ]
              },
              "frameBy": [],
              "filters": [
                {
                  "column": "event_date_time",
                  "condition": ">=",
                  "values": ["2023-05-01"]
                },
                {
                  "column": "ui_action",
                  "condition": "=",
                  "values": ["onpress"]
                },
                {
                  "column": "control",
                  "condition": "NOT LIKE",
                  "values": ["%testid%"]
                },
                {
                  "column": "control",
                  "condition": "!=",
                  "values": ["welcome core navigationviewitem id"]
                }
              ],
              "limit": 10
            },
            "queries": [
              {
                "name": "source_0",
                "query": {
                  "datasetName": "hpx_events_model_dataset",
                  "fields": [
                    {
                      "name": "control",
                      "expression": "control"
                    },
                    {
                      "name": "daily_event_date",
                      "expression": "DATE_TRUNC('DAY', event_date_time)"
                    },
                    {
                      "name": "total_clicks",
                      "expression": "SUM(clicks)"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ]
          }
        }
      ]
    }
  ]
}