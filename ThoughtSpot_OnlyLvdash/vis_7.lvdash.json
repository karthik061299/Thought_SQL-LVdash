{
  "version": "1.0",
  "metadata": {
    "name": "Top On Press Events",
    "description": "HPX Events Model with IIDE Table - Bar chart showing top controls by total clicks for onpress events",
    "created_by": "ThoughtSpot Migration Agent",
    "created_at": "2024-01-01T00:00:00Z",
    "tags": ["hpx_events", "onpress", "controls", "clicks"]
  },
  "datasets": [
    {
      "name": "hpx_events_model_dataset",
      "displayName": "HPX Events Model Dataset",
      "query": "SELECT control, clicks, ui_action FROM team_css_analytics_prod.hpx_analytics.hpx_events_model_iide_metric_view WHERE ui_action = 'onpress' AND control NOT LIKE '%testid%'"
    }
  ],
  "pages": [
    {
      "name": "main_page",
      "displayName": "Top On Press Events Dashboard",
      "layout": {
        "position": {
          "x": 0,
          "y": 0,
          "width": 12,
          "height": 8
        }
      },
      "spec": {
        "version": "1.0",
        "datasets": [
          {
            "name": "hpx_events_model_dataset",
            "displayName": "HPX Events Model Dataset",
            "query": "SELECT control AS Control, SUM(clicks) AS `Total Clicks` FROM team_css_analytics_prod.hpx_analytics.hpx_events_model_iide_metric_view WHERE ui_action = 'onpress' AND control NOT LIKE '%testid%' GROUP BY control ORDER BY SUM(clicks) DESC LIMIT 10"
          }
        ],
        "fields": [
          {
            "name": "Control",
            "displayName": "Control",
            "dataType": "STRING",
            "semanticType": "DIMENSION"
          },
          {
            "name": "Total Clicks",
            "displayName": "Total Clicks",
            "dataType": "INTEGER",
            "semanticType": "MEASURE"
          }
        ],
        "encodings": {
          "x": {
            "fieldName": "Control",
            "displayName": "Control",
            "scale": {
              "type": "categorical"
            }
          },
          "y": {
            "fieldName": "Total Clicks",
            "displayName": "Total Clicks",
            "scale": {
              "type": "quantitative"
            }
          }
        },
        "mark": {
          "type": "bar",
          "properties": {
            "color": "#0096D3",
            "opacity": 0.8
          }
        },
        "title": {
          "text": "Top On Press Events",
          "subtitle": "Total clicks by control for onpress UI actions (excluding test controls)"
        },
        "axes": [
          {
            "orient": "bottom",
            "scale": "x",
            "title": "Control",
            "labelAngle": -45,
            "labelLimit": 100
          },
          {
            "orient": "left",
            "scale": "y",
            "title": "Total Clicks",
            "format": ".0f"
          }
        ],
        "config": {
          "view": {
            "stroke": "transparent"
          },
          "axis": {
            "domainWidth": 1,
            "grid": true,
            "gridColor": "#f0f0f0",
            "gridOpacity": 0.5,
            "labelFont": "Arial",
            "labelFontSize": 10,
            "titleFont": "Arial",
            "titleFontSize": 12,
            "titleFontWeight": "bold"
          },
          "legend": {
            "labelFont": "Arial",
            "labelFontSize": 10,
            "titleFont": "Arial",
            "titleFontSize": 11,
            "titleFontWeight": "bold"
          }
        }
      }
    }
  ],
  "filters": [
    {
      "column": "ui_action",
      "operator": "EQ",
      "values": ["onpress"],
      "displayName": "UI Action Filter"
    },
    {
      "column": "control",
      "operator": "NOT_CONTAINS",
      "values": ["testid"],
      "displayName": "Exclude Test Controls"
    }
  ],
  "parameters": [],
  "refresh": {
    "enabled": true,
    "interval": "1h"
  }
}