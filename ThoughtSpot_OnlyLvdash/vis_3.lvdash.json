{
  "version": "1.0",
  "metadata": {
    "name": "New Devices by Top 10 Countries",
    "description": "HPX Events Model with IIDE Table",
    "created_by": "ThoughtSpot Migration Agent",
    "created_at": "2024-01-01T00:00:00Z",
    "tags": ["hpx_events_model", "geo_analysis", "device_metrics"]
  },
  "datasets": [
    {
      "name": "hpx_events_model_dataset",
      "displayName": "HPX Events Model Dataset",
      "query": "SELECT geo_country_code, new_devices_1 FROM team_css_analytics_prod.hpx_analytics.hpx_events_model_iide_metric_view"
    }
  ],
  "pages": [
    {
      "name": "page_1",
      "displayName": "New Devices by Countries",
      "layout": {
        "position": {
          "x": 0,
          "y": 0,
          "width": 12,
          "height": 8
        }
      },
      "widgets": [
        {
          "name": "new_devices_by_countries_pie",
          "displayName": "New Devices by Top 10 Countries",
          "position": {
            "x": 0,
            "y": 0,
            "width": 12,
            "height": 8
          },
          "spec": {
            "version": "3.0",
            "widgetType": "pie",
            "encodings": {
              "angle": {
                "fieldName": "new_devices_1",
                "displayName": "New Devices",
                "scale": {
                  "type": "quantitative"
                }
              },
              "color": {
                "fieldName": "geo_country_code",
                "displayName": "Geo Country Code",
                "scale": {
                  "type": "categorical"
                }
              }
            },
            "frame": {
              "showTitle": true,
              "title": "New Devices by Top 10 Countries"
            },
            "controls": {
              "legend": {
                "isVisible": true,
                "position": "right"
              }
            }
          },
          "queries": [
            {
              "name": "pie_chart_query",
              "query": {
                "version": "1.0",
                "datasetName": "hpx_events_model_dataset",
                "fields": [
                  {
                    "name": "geo_country_code",
                    "expression": "geo_country_code"
                  },
                  {
                    "name": "new_devices_1",
                    "expression": "SUM(new_devices_1)"
                  }
                ],
                "disaggregated": false,
                "groupBy": [
                  {
                    "fieldName": "geo_country_code"
                  }
                ],
                "orderBy": [
                  {
                    "fieldName": "new_devices_1",
                    "direction": "DESC"
                  }
                ],
                "limit": 10
              }
            }
          ]
        }
      ]
    }
  ]
}